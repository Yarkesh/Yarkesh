{"version":3,"sources":["component/util/useTitle.jsx","component/pages/ProjectTimeline/index.jsx"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","useTitle","title","useEffect","document","console","log","Index","props","_useState","useState","_useState2","Object","_home_sina_code_react_karaFront_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_11__","filtering","setFiltering","dispatch","useDispatch","_useSelector","useSelector","state","timeline","shallowEqual","loading","milestone","sprints","user","auth","getTimeline","match","params","projectId","react__WEBPACK_IMPORTED_MODULE_12___default","a","createElement","antd_es_card__WEBPACK_IMPORTED_MODULE_1__","Fragment","style","height","overflow","width","margin","antd_es_skeleton__WEBPACK_IMPORTED_MODULE_10__","active","display","justifyContent","antd_es_button__WEBPACK_IMPORTED_MODULE_8__","type","onClick","antd_es_timeline__WEBPACK_IMPORTED_MODULE_5__","mode","concat","_home_sina_code_react_karaFront_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_6__","sort","b","Date","dueDate","map","ms","description","Item","position","key","milestoneId","color","toDateString","sprintId","sprintName","startDate","toLocaleDateString","stories","filter","story","assignedTo","find","item","userId","antd_es_tag__WEBPACK_IMPORTED_MODULE_3__","storyId","storyName"],"mappings":"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","file":"static/js/24.cfcfde66.chunk.js","sourcesContent":["import { useEffect } from \"react\";\n\nconst useTitle = title => {\n  useEffect(() => {\n    document.title = title;\n    console.log(\"name\");\n  }, [title]);\n};\n\nexport default useTitle;\n","import React, { useEffect, useState } from \"react\";\nimport { Skeleton, Timeline, Tag, Button, Card } from \"antd\";\nimport { shallowEqual, useSelector, useDispatch } from \"react-redux\";\nimport { getTimeline } from \"../../../action/project\";\nimport useTitle from \"../../util/useTitle\";\nconst Index = props => {\n  useTitle(\"project timeline\");\n  const [filtering, setFiltering] = useState(false);\n\n  const dispatch = useDispatch();\n  const { loading, milestone, sprints } = useSelector(\n    state => state.timeline,\n    shallowEqual\n  );\n  const { user } = useSelector(state => state.auth, shallowEqual);\n\n  useEffect(() => {\n    dispatch(getTimeline(props.match.params.projectId));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.match.params.projectId]);\n\n  return (\n    <Card>\n      {loading === 0 ? (\n        <>\n          <div>\n            <div\n              style={{\n                height: \"120px\",\n                overflow: \"hidden\",\n                width: \"100%\",\n                margin: \"auto 0\"\n              }}\n            >\n              <Skeleton active />\n            </div>\n          </div>\n        </>\n      ) : (\n          <div style={{ margin: \"0 auto\" }}>\n            <div\n              style={{\n                margin: \"10px  auto\",\n                display: \"flex\",\n                justifyContent: \"center\"\n              }}\n            >\n              <Button\n                type={!filtering ? \"primary\" : \"normal\"}\n                onClick={() => setFiltering(false)}\n              >\n                {\" \"}\n                all work\n            </Button>\n              <span style={{ margin: \"10px\" }}></span>\n              <Button\n                type={filtering ? \"primary\" : \"normal\"}\n                onClick={() => setFiltering(true)}\n              >\n                {\" \"}\n                my work\n            </Button>\n            </div>\n            <Timeline style={{ margin: \"0 auto\" }} mode=\"alternate\">\n              {[...milestone, ...sprints]\n                .sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate))\n                .map(ms =>\n                  ms.description ? (\n                    <Timeline.Item\n                      position=\"right\"\n                      key={\"mile\" + ms.milestoneId}\n                      color=\"red\"\n                    >\n                      {ms.description} {\"  at \"}\n                      <b>{new Date(ms.dueDate).toDateString()}</b>\n                    </Timeline.Item>\n                  ) : (\n                      <Timeline.Item position=\"left\" key={\"sprint\" + ms.sprintId}>\n                        <h3> {ms.sprintName}</h3>\n                        <div>\n                          <h5>\n                            <div>\n                              start :\n                          <b>{new Date(ms.startDate).toLocaleDateString()}</b>\n                            </div>\n                            <div>\n                              {\"end     :\"}\n                              <b>{new Date(ms.dueDate).toLocaleDateString()}</b>\n                            </div>\n                          </h5>\n                          {filtering\n                            ? ms.stories\n                              .filter(\n                                story =>\n                                  story.assignedTo &&\n                                  story.assignedTo.find(\n                                    item => item.userId === user.userId\n                                  )\n                              )\n                              .map(story => (\n                                <Tag\n                                  key={story.storyId}\n                                  style={{ margin: \"4px\" }}\n                                  color=\"cyan\"\n                                >\n                                  {story.storyName}\n                                </Tag>\n                              ))\n                            : ms.stories.map(story => (\n                              <Tag\n                                key={story.storyId}\n                                style={{ margin: \"4px\" }}\n                                color=\"cyan\"\n                              >\n                                {story.storyName}\n                              </Tag>\n                            ))}\n                        </div>\n                      </Timeline.Item>\n                    )\n                )}\n            </Timeline>\n          </div>\n        )}\n    </Card>\n  );\n};\n\nexport default Index;\n"],"sourceRoot":""}